{"version":3,"sources":["../js/base/ResourceLoader.js"],"names":[],"mappings":"AAAA;AACA,SAAQ,SAAR,QAAwB,gBAAxB;;AAEA,OAAO,MAAM,cAAN,CAAqB;AACxB,kBAAc;AACV,aAAK,GAAL,GAAW,IAAI,GAAJ,CAAQ,SAAR,CAAX;AACA,aAAK,IAAI,CAAC,GAAD,EAAM,KAAN,CAAT,IAAyB,KAAK,GAA9B,EAAmC;AAC/B,kBAAM,QAAQ,IAAI,KAAJ,EAAd;AACA;AACA,kBAAM,GAAN,GAAY,KAAZ;AACA;AACA,iBAAK,GAAL,CAAS,GAAT,CAAa,GAAb,EAAkB,KAAlB;AACA;AACH;AACJ;AACD,aAAS,QAAT,EAAmB;AACf,YAAI,cAAc,CAAlB;AACA,aAAK,IAAI,KAAT,IAAkB,KAAK,GAAL,CAAS,MAAT,EAAlB,EAAqC;AACjC;AACA;AACA,kBAAM,MAAN,GAAe,MAAM;AACjB;AACA,oBAAI,eAAe,KAAK,GAAL,CAAS,IAA5B,EAAkC;AAC9B,6BAAS,KAAK,GAAd;AACH;AACJ,aALD;AAMH;AACJ;AACD,WAAO,MAAP,GAAgB;AACZ,eAAO,IAAI,cAAJ,EAAP;AACH;AA3BuB","file":"ResourceLoader-compiled.js","sourcesContent":["//资源文件加载器，确保canvas在图片资源加载完成后才进行渲染\nimport {Resources} from \"./Resources.js\";\n\nexport class ResourceLoader {\n    constructor() {\n        this.map = new Map(Resources);\n        for (let [key, value] of this.map) {\n            const image = new Image();\n            //const image = wx.createImage();\n            image.src = value;\n            //console.log(image)\n            this.map.set(key, image);\n            //console.log(this.map.values())\n        }\n    }\n    onLoaded(callback) {\n        let loadedCount = 0;\n        for (let value of this.map.values()) {\n            //console.log(this.map.values())\n            //console.log(typeof value, value)\n            value.onload = () => {\n                loadedCount++;\n                if (loadedCount >= this.map.size) {\n                    callback(this.map);\n                }\n            }\n        }\n    }\n    static create() {\n        return new ResourceLoader();\n    }\n}"]}